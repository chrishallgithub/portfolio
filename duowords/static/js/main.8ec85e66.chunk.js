(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,n,t){},226:function(e,n,t){"use strict";t.r(n);var a,r,s,o,i,c,l=t(4),u=t.n(l),d=t(33),g=t.n(d),h=t(31),j=t(41),p=t(26),b=t(27),f=t(30),v=t(29),O=t(24),m=(t(117),t(17)),w=t(23),x=t(108),y=t.n(x),k=t(102),C=t(99),L=t.n(C),F=t(39),T=t.n(F),S=t(101),N=t.n(S),W=t(6),$=function(e){Object(f.a)(t,e);var n=Object(v.a)(t);function t(){var e;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))).state={open:!0},e.handleClick=function(){e.setState({open:!0})},e.handleClose=function(n,t){"clickaway"!==t&&e.setState({open:!1})},e}return Object(b.a)(t,[{key:"render",value:function(){var e=this.props.classes,n=this.props.message,t=this.props.timeout;return Object(W.jsx)("div",{children:Object(W.jsx)(L.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:Number(t),onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:Object(W.jsx)("span",{id:"message-id",children:n}),action:[Object(W.jsx)(T.a,{"aria-label":"Close",color:"inherit",className:e.close,onClick:this.handleClose,children:Object(W.jsx)(N.a,{})},"close")]})})}}]),t}(u.a.Component),A=Object(k.withStyles)((function(e){return{close:{padding:e.spacing.unit/2}}}))($),E=t(54),B=t.n(E),z=t(53),I=t.n(z),R=t(55),V=t.n(R),q=function(e){switch(e){case"sv":return"se";case"je":return"jp";case"kr":return"ko";case"zh":return"cn";case"el":return"gr";case"ga":return"ie";case"he":return"il";case"vi":return console.log("Flag added for language - "+e),"vn";case"da":return"dk";case"hi":case"pa":return"in";case"sw":return"tz";case"uk":return console.log("Flag added for language - "+e),"ua";case"cs":return"cz";case"ar":return"ae";case"en":return"gb";case"cy":return"gb-wls";case"gn":return"py";case"ca":return"es-ct";default:return e}},D=t(110),Q=Object(D.a)(u.a,{useCssModules:!1}),_=Object(w.a)(a||(a=Object(O.a)(["{\n    langs\n}"]))),J=function(e){Object(f.a)(t,e);var n=Object(v.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).toggleAllTranslations=function(){document.getElementById("wordContainer").classList.toggle("showTrans");for(var e=document.getElementsByClassName("translation"),n=0;n<e.length;n++)e[n].classList.remove("showTrans")},a.toggleFavourites=function(){return document.getElementById("wordContainer").classList.toggle("showFavourites"),a.props.handleFavouritesClick()},a.state={favouritesView:!1},a}return Object(b.a)(t,[{key:"render",value:function(){var e=this;return Object(W.jsxs)("nav",{children:[Object(W.jsx)(m.b,{query:_,children:function(n){var t=n.loading,a=n.data,r=n.refetch;if(t)return null;var s=a.langs;return!0===e.props.newAdded&&r(),s.map((function(n){return Object(W.jsx)(V.a,{className:"lang button",onClick:function(){e.props.changeLang(n)},color:"primary","aria-label":"Change Language",size:"small","data-current-language":e.props.currentLang===n,children:Object(W.jsx)(Q,{code:q(n)})},n)}))}}),Object(W.jsx)(V.a,{color:"primary","aria-label":"Toggle Favourite",className:"button",size:"small",onClick:function(n){return e.toggleFavourites()},children:Object(W.jsx)(I.a,{})}),Object(W.jsx)(V.a,{color:"primary","aria-label":"Toggle All Translations",className:"button",size:"small",onClick:function(n){return e.toggleAllTranslations()},children:Object(W.jsx)(B.a,{})})]})}}]),t}(l.Component),M=t(73),P=t(70),U=t.n(P),H=t(107),Y=t.n(H),G=t(71),K=t.n(G),X=t(38),Z=t.n(X),ee=t(72),ne=t.n(ee),te=Object(w.a)(r||(r=Object(O.a)(["\n    query langWords($lang: String!) { \n        langWords(lang: $lang){\n            id\n            lang\n            flag\n            lessonTitle\n            singleWord\n            transReturn\n            favourite\n        }\n    }\n"]))),ae=Object(w.a)(s||(s=Object(O.a)(["\n    mutation($id: ID!, $favourite: Boolean!){ \n        updateFavourite(id: $id, favourite: $favourite)\n    }\n"]))),re=function(e){Object(f.a)(t,e);var n=Object(v.a)(t);function t(){var e;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))).toggleSingleTranslation=function(e){document.getElementById(e).classList.toggle("showTrans")},e.toggleFavourites=function(){return document.getElementById("wordContainer").classList.toggle("showFavourites"),e.props.handleFavouritesClick()},e.updateFavourite=function(){var n=Object(j.a)(Object(h.a)().mark((function n(t){return Object(h.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.props.updateFavourite({variables:{id:t.id,favourite:!t.favourite},update:function(n){var a=n.readQuery({query:te,variables:{lang:e.props.currentLang}});a.langWords=a.langWords.map((function(e){return e.id===t.id?Object(M.a)(Object(M.a)({},t),{},{favourite:!t.favourite}):e})),n.writeQuery({query:te,variables:{lang:e.props.currentLang},data:a})}});case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e}return Object(b.a)(t,[{key:"render",value:function(){var e=this;return Object(W.jsx)(m.b,{query:te,variables:{lang:this.props.currentLang},children:function(n){var t=n.loading,a=n.data,r=n.refetch;if(t||!1===e.props.newAdded)return null;var s=a.langWords;return s.every((function(e){return!0!==e.favourite}))&&e.props.favouritesView?Object(W.jsx)("div",{className:"noFavouritesCont",children:Object(W.jsx)(U.a,{className:"noFavourites",onClick:e.toggleFavourites,children:Object(W.jsxs)(K.a,{className:"noFavouritesContent",children:[Object(W.jsxs)(Z.a,{variant:"h5",component:"h2",children:["You currently have no favourites.",Object(W.jsx)("br",{}),"Add favourites by clicking",Object(W.jsx)(T.a,{"aria-label":"Toggle Favourite Example",children:Object(W.jsx)(ne.a,{})})]}),Object(W.jsx)(Z.a,{component:"p",children:Object(W.jsx)("span",{className:"noFavouritesButton",children:"Click here to return."})})]})})}):(!0===e.props.newAdded&&r(),s.map((function(n){return Object(W.jsxs)(U.a,{className:"wordBoxCont","data-flag":n.flag,"data-favourite":n.favourite,"data-lang":n.lang,"data-lesson":n.lessonTitle,children:[Object(W.jsxs)(K.a,{className:"wordContent",children:[Object(W.jsx)(Z.a,{variant:"h5",component:"h2",className:"original",children:n.singleWord}),Object(W.jsx)(Z.a,{component:"p",id:n.id,className:"translation",children:n.transReturn})]}),Object(W.jsxs)(Y.a,{className:"buttons",children:[Object(W.jsx)(T.a,{"aria-label":"Toggle Favourite",className:"button favouriteButton",size:"small",onClick:function(){e.updateFavourite(n)},children:!0===n.favourite?Object(W.jsx)(I.a,{}):Object(W.jsx)(ne.a,{})}),Object(W.jsx)(T.a,{"aria-label":"Toggle Translation",className:"button translationButton",size:"small",onClick:function(){return e.toggleSingleTranslation(n.id)},children:Object(W.jsx)(B.a,{})})]})]},n.id)})))}})}}]),t}(l.Component),se=Object(m.d)(ae,{name:"updateFavourite"})(re),oe=Object(w.a)(o||(o=Object(O.a)(["\n    mutation($lessonTitle: String!, $lang: String!){ \n        lessonCheck(lessonTitle: $lessonTitle, lang: $lang)\n    }\n"]))),ie=Object(w.a)(i||(i=Object(O.a)(["\n    mutation($lang: String!, $flag: String! $lessonTitle: String!, $singleWord: String!, $transReturn:String){\n        createWord(lang: $lang, flag: $flag, lessonTitle: $lessonTitle, singleWord: $singleWord, transReturn: $transReturn){\n            id\n            lang\n            flag\n            lessonTitle\n            singleWord\n            transReturn \n        }\n    }\n"]))),ce=Object(w.a)(c||(c=Object(O.a)(["{\n    langs\n}"]))),le=function(e){Object(f.a)(t,e);var n=Object(v.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).getLessons=function(){fetch("https://www.duolingo.com/users/cduo").then((function(e){return e.json()})).then((function(e){var n=Object.keys(e.language_data).toString(),t=q(n);a.setState({currentLang:n,currentFlag:t});for(var r=function(r){var s=e.language_data[n].skills[r].title,o=e.language_data[n].skills[r].words;a.lessonCheckQuery(s,n).then((function(e){!0===e.data.lessonCheck?console.log("Lesson Exists in DB"):(console.log("To be added: Lesson "+s),a.setState({newAdded:!1}),a.prepareWords(o,n,t,s))}))},s=0;s<e.language_data[n].skills.length;s++)r(s)})).catch((function(e){console.log("Fetch Error"),a.setState({noLoad:!0})}))},a.prepareWords=function(e,n,t,r){var s=[];for(var o in e){var i=e[o].split(" ").sort((function(e,n){return n.length-e.length}));s.push(i[0])}a.getTrans(s,r,n,t)},a.getTrans=function(e,n,t,r){var s="https://d2.duolingo.com/api/1/dictionary/hints/"+t+"/en?tokens="+encodeURIComponent('["'+e.join('", "')+'"]');fetch(s).then((function(e){return e.json()})).then((function(s){for(var o in e){var i;i=s[e[o]].length?s[e[o]].join(", "):"[Not Found]",a.createWord(t,r,n,e[o],i),console.log("Adding: Lesson "+n)}console.log("All added"),a.setState({newAdded:!0})})).catch((function(e){console.log("Translation Error"),console.log(e),a.setState({noTrans:!0})}))},a.createWord=function(){var e=Object(j.a)(Object(h.a)().mark((function e(n,t,r,s,o){return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.createWord({variables:{lang:n,flag:t,lessonTitle:r,singleWord:s,transReturn:o}});case 2:case"end":return e.stop()}}),e)})));return function(n,t,a,r,s){return e.apply(this,arguments)}}(),a.lessonCheckQuery=function(){var e=Object(j.a)(Object(h.a)().mark((function e(n,t){return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.lessonCheck({variables:{lessonTitle:n,lang:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),a.handleFavouritesClick=function(){a.setState({favouritesView:!a.state.favouritesView})},a.changeLang=function(e){var n=q(e);a.setState({currentLang:e,currentFlag:n,favouritesView:!1}),document.getElementById("wordContainer").classList.remove("showFavourites")},a.displayError=function(e,n){return!0===n?Object(W.jsx)(A,{message:e,timeout:"10000"}):Object(W.jsxs)("div",{className:"loading",children:[Object(W.jsx)(y.a,{className:"loadingCircle"}),Object(W.jsx)(A,{message:e,timeout:"10000"})]})},a.state={currentLang:"",currentFlag:"",favouritesView:!1,noLoad:!1,noLang:!1,noTrans:!1},a}return Object(b.a)(t,[{key:"componentDidMount",value:function(){this.getLessons()}},{key:"componentDidUpdate",value:function(){if(!1===this.props.langs.loading&&!0===this.state.noLoad&&!1===this.state.noLang&&""===this.state.currentLang)try{if("undefined"!==typeof this.props.langs.langs[0]){var e=this.props.langs.langs[0],n=q(e);this.setState({currentLang:e,currentFlag:n})}else this.setState({noLang:!0})}catch(t){console.log(t)}}},{key:"render",value:function(){return""!==this.state.currentLang&&""!==this.state.currentFlag||!1!==this.state.noLang?!0===this.state.noTrans?this.displayError("Translation error."):!0===this.state.noLang?this.displayError("No data found. Please check your internet connection and try again."):Object(W.jsxs)("div",{id:"app",children:[Object(W.jsx)("header",{children:Object(W.jsx)(J,{newAdded:this.state.newAdded,changeLang:this.changeLang,handleFavouritesClick:this.handleFavouritesClick,toggleFavourites:this.toggleFavourites,currentLang:this.state.currentLang})}),Object(W.jsxs)("main",{role:"main",id:"wordContainer",className:"words hideTrans",children:[Object(W.jsx)(se,{currentLang:this.state.currentLang,newAdded:this.state.newAdded,favouritesView:this.state.favouritesView,handleFavouritesClick:this.handleFavouritesClick}),!!this.state.noLoad&&this.displayError("Could not update language information. Offline mode activated.",!0)]})]}):this.displayError("Attempting to update language information.")}}]),t}(l.Component),ue=Object(m.c)(Object(m.d)(ie,{name:"createWord"}),Object(m.d)(oe,{name:"lessonCheck"}),Object(m.d)(ce,{name:"langs"}))(le);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=new(t(111).a)({uri:"https://duowordsdb.herokuapp.com"});g.a.render(Object(W.jsx)(m.a,{client:de,children:Object(W.jsx)(ue,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[226,1,2]]]);
//# sourceMappingURL=main.8ec85e66.chunk.js.map