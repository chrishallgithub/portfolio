(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{120:function(e,n,t){e.exports=t(259)},127:function(e,n,t){},259:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(27),s=t.n(o),i=t(26),l=t.n(i),c=t(42),u=t(23),g=t(24),d=t(35),h=t(25),f=t(36),m=t(22),p=(t(127),t(12)),v=t(13),b=t.n(v),w=t(114),E=t.n(w),y=t(110),k=t(108),C=t.n(k),j=t(39),O=t.n(j),L=t(109),F=t.n(L),T=function(e){function n(){var e,t;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(d.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(r)))).state={open:!0},t.handleClick=function(){t.setState({open:!0})},t.handleClose=function(e,n){"clickaway"!==n&&t.setState({open:!1})},t}return Object(f.a)(n,e),Object(g.a)(n,[{key:"render",value:function(){var e=this.props.classes,n=this.props.message,t=this.props.timeout;return r.a.createElement("div",null,r.a.createElement(C.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:Number(t),onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},n),action:[r.a.createElement(O.a,{key:"close","aria-label":"Close",color:"inherit",className:e.close,onClick:this.handleClose},r.a.createElement(F.a,null))]}))}}]),n}(r.a.Component),S=Object(y.withStyles)(function(e){return{close:{padding:e.spacing.unit/2}}})(T),N=t(55),W=t.n(N),$=t(54),A=t.n($),B=t(56),x=t.n(B),q=function(e){switch(e){case"sv":return"se";case"je":return"jp";case"kr":return"ko";case"zh":return"cn";case"el":return"gr";case"ga":return"ie";case"he":return"il";case"vi":return console.log("Flag added for language - "+e),"vn";case"da":return"dk";case"hi":return"in";case"sw":return"tz";case"uk":return console.log("Flag added for language - "+e),"ua";case"cs":return"cz";case"ar":return"ae";case"en":return"gb";case"cy":return"gb-wls";case"gn":return"py";case"pa":return"in";case"ca":return"es-ct";default:return e}},z=t(117);function I(){var e=Object(m.a)(["{\n    langs\n}"]);return I=function(){return e},e}var R=Object(z.a)(r.a,{useCssModules:!1}),V=b()(I()),Q=function(e){function n(e){var t;return Object(u.a)(this,n),(t=Object(d.a)(this,Object(h.a)(n).call(this,e))).toggleAllTranslations=function(){document.getElementById("wordContainer").classList.toggle("showTrans");for(var e=document.getElementsByClassName("translation"),n=0;n<e.length;n++)e[n].classList.remove("showTrans")},t.toggleFavourites=function(){return document.getElementById("wordContainer").classList.toggle("showFavourites"),t.props.handleFavouritesClick()},t.state={favouritesView:!1},t}return Object(f.a)(n,e),Object(g.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("nav",null,r.a.createElement(p.Query,{query:V},function(n){var t=n.loading,a=n.data,o=n.refetch;if(t)return null;var s=a.langs;return!0===e.props.newAdded&&o(),s.map(function(n){return r.a.createElement(x.a,{key:n,className:"lang button",onClick:function(){e.props.changeLang(n)},color:"primary","aria-label":"Change Language",size:"small","data-current-language":e.props.currentLang===n},r.a.createElement(R,{code:q(n)}))})}),r.a.createElement(x.a,{color:"primary","aria-label":"Toggle Favourite",className:"button",size:"small",onClick:function(n){return e.toggleFavourites()}},r.a.createElement(A.a,null)),r.a.createElement(x.a,{color:"primary","aria-label":"Toggle All Translations",className:"button",size:"small",onClick:function(n){return e.toggleAllTranslations()}},r.a.createElement(W.a,null)))}}]),n}(a.Component),D=t(118),_=t(78),P=t.n(_),J=t(113),M=t.n(J),U=t(79),H=t.n(U),Y=t(38),G=t.n(Y),K=t(80),X=t.n(K);function Z(){var e=Object(m.a)(["\n    mutation($id: ID!, $favourite: Boolean!){ \n        updateFavourite(id: $id, favourite: $favourite)\n    }\n"]);return Z=function(){return e},e}function ee(){var e=Object(m.a)(["\n    query langWords($lang: String!) { \n        langWords(lang: $lang){\n            id\n            lang\n            flag\n            lessonTitle\n            singleWord\n            transReturn\n            favourite\n        }\n    }\n"]);return ee=function(){return e},e}var ne=b()(ee()),te=b()(Z()),ae=function(e){function n(){var e,t;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(d.a)(this,(e=Object(h.a)(n)).call.apply(e,[this].concat(r)))).toggleSingleTranslation=function(e){document.getElementById(e).classList.toggle("showTrans")},t.toggleFavourites=function(){return document.getElementById("wordContainer").classList.toggle("showFavourites"),t.props.handleFavouritesClick()},t.updateFavourite=function(){var e=Object(c.a)(l.a.mark(function e(n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.updateFavourite({variables:{id:n.id,favourite:!n.favourite},update:function(e){var a=e.readQuery({query:ne,variables:{lang:t.props.currentLang}});a.langWords=a.langWords.map(function(e){return e.id===n.id?Object(D.a)({},n,{favourite:!n.favourite}):e}),e.writeQuery({query:ne,variables:{lang:t.props.currentLang},data:a})}});case 2:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}(),t}return Object(f.a)(n,e),Object(g.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(p.Query,{query:ne,variables:{lang:this.props.currentLang}},function(n){var t=n.loading,a=n.data,o=n.refetch;if(t||!1===e.props.newAdded)return null;var s=a.langWords;return s.every(function(e){return!0!==e.favourite})&&e.props.favouritesView?r.a.createElement("div",{className:"noFavouritesCont"},r.a.createElement(P.a,{className:"noFavourites",onClick:e.toggleFavourites},r.a.createElement(H.a,{className:"noFavouritesContent"},r.a.createElement(G.a,{variant:"h5",component:"h2"},"You currently have no favourites.",r.a.createElement("br",null),"Add favourites by clicking",r.a.createElement(O.a,{"aria-label":"Toggle Favourite Example"},r.a.createElement(X.a,null))),r.a.createElement(G.a,{component:"p"},r.a.createElement("span",{className:"noFavouritesButton"},"Click here to return."))))):(!0===e.props.newAdded&&o(),s.map(function(n){return r.a.createElement(P.a,{key:n.id,className:"wordBoxCont","data-flag":n.flag,"data-favourite":n.favourite,"data-lang":n.lang,"data-lesson":n.lessonTitle},r.a.createElement(H.a,{className:"wordContent"},r.a.createElement(G.a,{variant:"h5",component:"h2",className:"original"},n.singleWord),r.a.createElement(G.a,{component:"p",id:n.id,className:"translation"},n.transReturn)),r.a.createElement(M.a,{className:"buttons"},r.a.createElement(O.a,{"aria-label":"Toggle Favourite",className:"button favouriteButton",size:"small",onClick:function(){e.updateFavourite(n)}},!0===n.favourite?r.a.createElement(A.a,null):r.a.createElement(X.a,null)),r.a.createElement(O.a,{"aria-label":"Toggle Translation",className:"button translationButton",size:"small",onClick:function(){return e.toggleSingleTranslation(n.id)}},r.a.createElement(W.a,null))))}))})}}]),n}(a.Component),re=Object(p.graphql)(te,{name:"updateFavourite"})(ae);function oe(){var e=Object(m.a)(["{\n    langs\n}"]);return oe=function(){return e},e}function se(){var e=Object(m.a)(["\n    mutation($lang: String!, $flag: String! $lessonTitle: String!, $singleWord: String!, $transReturn:String){\n        createWord(lang: $lang, flag: $flag, lessonTitle: $lessonTitle, singleWord: $singleWord, transReturn: $transReturn){\n            id\n            lang\n            flag\n            lessonTitle\n            singleWord\n            transReturn \n        }\n    }\n"]);return se=function(){return e},e}function ie(){var e=Object(m.a)(["\n    mutation($lessonTitle: String!, $lang: String!){ \n        lessonCheck(lessonTitle: $lessonTitle, lang: $lang)\n    }\n"]);return ie=function(){return e},e}var le=b()(ie()),ce=b()(se()),ue=b()(oe()),ge=function(e){function n(e){var t;return Object(u.a)(this,n),(t=Object(d.a)(this,Object(h.a)(n).call(this,e))).getLessons=function(){fetch("/duolingo/cduo.json").then(function(e){return e.json()}).then(function(e){var n=Object.keys(e.language_data).toString(),a=q(n);t.setState({currentLang:n,currentFlag:a});for(var r=function(r){var o=e.language_data[n].skills[r].title,s=e.language_data[n].skills[r].words;t.lessonCheckQuery(o,n).then(function(e){!0===e.data.lessonCheck?console.log("Lesson Exists in DB"):(console.log("To be added: Lesson "+o),t.setState({newAdded:!1}),t.prepareWords(s,n,a,o))})},o=0;o<e.language_data[n].skills.length;o++)r(o)}).catch(function(e){console.log("Fetch Error"),t.setState({noLoad:!0})})},t.prepareWords=function(e,n,a,r){var o=[];for(var s in e){var i=e[s].split(" ").sort(function(e,n){return n.length-e.length});o.push(i[0])}t.getTrans(o,r,n,a)},t.getTrans=function(e,n,a,r){var o="https://d2.duolingo.com/api/1/dictionary/hints/"+a+"/en?tokens="+encodeURIComponent('["'+e.join('", "')+'"]');fetch(o).then(function(e){return e.json()}).then(function(o){for(var s in e){var i;i=o[e[s]].length?o[e[s]].join(", "):"[Not Found]",t.createWord(a,r,n,e[s],i),console.log("Adding: Lesson "+n)}console.log("All added"),t.setState({newAdded:!0})}).catch(function(e){console.log("Translation Error"),console.log(e),t.setState({noTrans:!0})})},t.createWord=function(){var e=Object(c.a)(l.a.mark(function e(n,a,r,o,s){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.createWord({variables:{lang:n,flag:a,lessonTitle:r,singleWord:o,transReturn:s}});case 2:case"end":return e.stop()}},e,this)}));return function(n,t,a,r,o){return e.apply(this,arguments)}}(),t.lessonCheckQuery=function(){var e=Object(c.a)(l.a.mark(function e(n,a){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.lessonCheck({variables:{lessonTitle:n,lang:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(n,t){return e.apply(this,arguments)}}(),t.handleFavouritesClick=function(){t.setState({favouritesView:!t.state.favouritesView})},t.changeLang=function(e){var n=q(e);t.setState({currentLang:e,currentFlag:n,favouritesView:!1}),document.getElementById("wordContainer").classList.remove("showFavourites")},t.displayError=function(e,n){return!0===n?r.a.createElement(S,{message:e,timeout:"10000"}):r.a.createElement("div",{className:"loading"},r.a.createElement(E.a,{className:"loadingCircle"}),r.a.createElement(S,{message:e,timeout:"10000"}))},t.state={currentLang:"",currentFlag:"",favouritesView:!1,noLoad:!1,noLang:!1,noTrans:!1},t}return Object(f.a)(n,e),Object(g.a)(n,[{key:"componentDidMount",value:function(){this.getLessons()}},{key:"componentDidUpdate",value:function(){if(!1===this.props.langs.loading&&!0===this.state.noLoad&&!1===this.state.noLang&&""===this.state.currentLang)try{if("undefined"!==typeof this.props.langs.langs[0]){var e=this.props.langs.langs[0],n=q(e);this.setState({currentLang:e,currentFlag:n})}else this.setState({noLang:!0})}catch(t){console.log(t)}}},{key:"render",value:function(){return""!==this.state.currentLang&&""!==this.state.currentFlag||!1!==this.state.noLang?!0===this.state.noTrans?this.displayError("Translation error."):!0===this.state.noLang?this.displayError("No data found. Please check your internet connection and try again."):r.a.createElement("div",{id:"app"},r.a.createElement("header",null,r.a.createElement(Q,{newAdded:this.state.newAdded,changeLang:this.changeLang,handleFavouritesClick:this.handleFavouritesClick,toggleFavourites:this.toggleFavourites,currentLang:this.state.currentLang})),r.a.createElement("main",{role:"main",id:"wordContainer",className:"words hideTrans"},r.a.createElement(re,{currentLang:this.state.currentLang,newAdded:this.state.newAdded,favouritesView:this.state.favouritesView,handleFavouritesClick:this.handleFavouritesClick}),!!this.state.noLoad&&this.displayError("Could not update language information. Offline mode activated.",!0))):this.displayError("Attempting to update language information.")}}]),n}(a.Component),de=Object(p.compose)(Object(p.graphql)(ce,{name:"createWord"}),Object(p.graphql)(le,{name:"lessonCheck"}),Object(p.graphql)(ue,{name:"langs"}))(ge);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=new(t(116).a)({uri:"https://duowordsdb.herokuapp.com"});s.a.render(r.a.createElement(p.ApolloProvider,{client:he},r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[120,2,1]]]);
//# sourceMappingURL=main.ab174a6c.chunk.js.map